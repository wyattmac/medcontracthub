{"version":3,"file":"config.js","sourceRoot":"","sources":["../src/config.ts"],"names":[],"mappings":"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","sourcesContent":["import { z } from 'zod';\nimport dotenv from 'dotenv';\n\n// Load environment variables\ndotenv.config();\n\nconst configSchema = z.object({\n  env: z.enum(['development', 'staging', 'production']).default('development'),\n  port: z.number().default(8300),\n  \n  // Kafka configuration\n  kafka: z.object({\n    brokers: z.array(z.string()).default(['kafka:9092']),\n    clientId: z.string().default('analytics-service'),\n    consumerGroup: z.string().default('analytics-consumer-group'),\n    topics: z.array(z.string()).default([\n      'contracts.opportunity.viewed',\n      'contracts.opportunity.saved',\n      'contracts.proposal.created',\n      'contracts.proposal.updated',\n      'ai.document.processed',\n      'user.activity',\n    ]),\n    sessionTimeout: z.number().default(30000),\n    rebalanceTimeout: z.number().default(60000),\n  }),\n  \n  // Schema Registry\n  schemaRegistry: z.object({\n    url: z.string().default('http://schema-registry:8081'),\n  }),\n  \n  // ClickHouse configuration\n  clickhouse: z.object({\n    host: z.string().default('clickhouse'),\n    port: z.number().default(8123),\n    database: z.string().default('medcontract_analytics'),\n    username: z.string().default('default'),\n    password: z.string().default(''),\n    requestTimeout: z.number().default(30000),\n  }),\n  \n  // Redis configuration (for caching)\n  redis: z.object({\n    host: z.string().default('redis-cluster'),\n    port: z.number().default(6379),\n    ttl: z.number().default(300), // 5 minutes\n  }),\n  \n  // Processing configuration\n  processing: z.object({\n    batchSize: z.number().default(1000),\n    flushIntervalMs: z.number().default(5000),\n    maxConcurrentQueries: z.number().default(10),\n    retryAttempts: z.number().default(3),\n    retryDelayMs: z.number().default(1000),\n  }),\n  \n  // Monitoring\n  monitoring: z.object({\n    metricsPort: z.number().default(9090),\n    healthCheckIntervalMs: z.number().default(30000),\n  }),\n  \n  // SLOs\n  slos: z.object({\n    dataFreshnessMinutes: z.number().default(5),\n    queryLatencyP99Ms: z.number().default(500),\n    availabilityTarget: z.number().default(0.995),\n  }),\n});\n\n// Parse and validate configuration\nconst parseConfig = () => {\n  const env = {\n    env: process.env['NODE_ENV'],\n    port: Number(process.env['PORT']) || undefined,\n    \n    kafka: {\n      brokers: process.env['KAFKA_BROKERS']?.split(','),\n      clientId: process.env['KAFKA_CLIENT_ID'],\n      consumerGroup: process.env['KAFKA_CONSUMER_GROUP'],\n      topics: process.env['KAFKA_TOPICS']?.split(','),\n    },\n    \n    schemaRegistry: {\n      url: process.env['SCHEMA_REGISTRY_URL'],\n    },\n    \n    clickhouse: {\n      host: process.env['CLICKHOUSE_HOST'],\n      port: Number(process.env['CLICKHOUSE_PORT']) || undefined,\n      database: process.env['CLICKHOUSE_DATABASE'],\n      username: process.env['CLICKHOUSE_USERNAME'],\n      password: process.env['CLICKHOUSE_PASSWORD'],\n    },\n    \n    redis: {\n      host: process.env['REDIS_HOST'],\n      port: Number(process.env['REDIS_PORT']) || undefined,\n    },\n    \n    processing: {\n      batchSize: Number(process.env['BATCH_SIZE']) || undefined,\n      flushIntervalMs: Number(process.env['FLUSH_INTERVAL_MS']) || undefined,\n    },\n    \n    monitoring: {\n      metricsPort: Number(process.env['METRICS_PORT']) || undefined,\n    },\n  };\n  \n  // Remove undefined values\n  const cleanEnv = JSON.parse(JSON.stringify(env));\n  \n  return configSchema.parse(cleanEnv);\n};\n\nexport const config = parseConfig();\n\n// Log configuration (without sensitive data)\nconsole.log('Analytics Service Configuration:', {\n  env: config.env,\n  port: config.port,\n  kafka: {\n    brokers: config.kafka.brokers,\n    topics: config.kafka.topics,\n  },\n  clickhouse: {\n    host: config.clickhouse.host,\n    database: config.clickhouse.database,\n  },\n});"]}